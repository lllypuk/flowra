# Application configuration
app:
  # Wiring mode: "real" (default) or "mock"
  # In production, only "real" mode is allowed.
  # Use "mock" only for development/testing without external dependencies.
  mode: "real"
  name: "flowra"

server:
  host: "0.0.0.0"
  port: 8080
  read_timeout: 30s
  write_timeout: 30s
  shutdown_timeout: 10s

mongodb:
  # DEV: No auth for local development with replica set
  # PROD: Use authenticated URI, e.g.:
  #   uri: "mongodb://user:password@host:27017/?replicaSet=rs0&authSource=admin"
  uri: "mongodb://localhost:27017/?replicaSet=rs0"
  database: "flowra"
  timeout: 10s
  max_pool_size: 100

redis:
  addr: "localhost:6379"
  password: ""
  db: 0
  pool_size: 10

keycloak:
  enabled: true  # Set to true when Keycloak is running
  url: "http://localhost:8090"
  realm: "flowra"
  client_id: "flowra-backend"
  client_secret: "flowra-dev-secret-change-in-production"
  # Audience for JWT validation. Empty = skip validation. Set to client_id after configuring audience mapper.
  jwt_audience: ""
  admin_username: "admin"
  admin_password: "admin123"
  jwt:
    leeway: "30s"
    refresh_interval: "1h"

auth:
  jwt_secret: "dev-secret-change-in-production"
  access_token_ttl: 15m
  refresh_token_ttl: 7d

eventbus:
  type: "redis" # redis | inmemory
  redis_channel_prefix: "events."

log:
  level: "info" # debug | info | warn | error
  format: "text" # json | text

websocket:
  read_buffer_size: 1024
  write_buffer_size: 1024
  ping_interval: 30s
  pong_timeout: 60s
