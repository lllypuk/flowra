# Task Use Cases Implementation Plan

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ use cases –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Task –∞–≥—Ä–µ–≥–∞—Ç–æ–º.

## –û–±–∑–æ—Ä

–¶–µ–ª—å: –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–ª–æ–π application logic (use cases) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Event Sourcing –∏ CQRS.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–¥–∞—á

### ‚úÖ Phase 1: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

| –ó–∞–¥–∞—á–∞ | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|--------|----------|
| **Task 01** | [01-usecase-architecture.md](01-usecase-architecture.md) | ‚úÖ Completed | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ use case —Å–ª–æ—è, –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã |

### ‚úÖ Phase 2: –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

| –ó–∞–¥–∞—á–∞ | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|--------|----------|
| **Task 02** | [02-create-task-usecase.md](02-create-task-usecase.md) | ‚úÖ Completed | –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ (CreateTask) |
| **Task 03** | [03-change-status-usecase.md](03-change-status-usecase.md) | ‚úÖ Completed | –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ (ChangeStatus) |
| **Task 04** | [04-assign-task-usecase.md](04-assign-task-usecase.md) | ‚úÖ Completed | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è (AssignTask) |
| **Task 05** | [05-simple-attribute-usecases.md](05-simple-attribute-usecases.md) | ‚úÖ Completed | –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –∏ –¥–µ–¥–ª–∞–π–Ω–∞ |

### ‚úÖ Phase 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

| –ó–∞–¥–∞—á–∞ | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|--------|----------|
| **Task 06** | [06-testing-strategy.md](06-testing-strategy.md) | üìù Pending | –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, helpers |

## –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–ó–∞–¥–∞—á–∏ –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ**, —Ç–∞–∫ –∫–∞–∫ –∫–∞–∂–¥–∞—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–π:

```
01 ‚Üí 02 ‚Üí 03 ‚Üí 04 ‚Üí 05 ‚Üí 06
```

### 1. Task 01: Use Case Architecture (2-3 —á–∞—Å–∞)

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö use cases:
- –°—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- –ü–∞—Ç—Ç–µ—Ä–Ω Command/Result
- –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ì–æ—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã –∏ –æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 2. Task 02: CreateTask (3-4 —á–∞—Å–∞)

–ü–µ—Ä–≤—ã–π –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π use case ‚Äî —ç—Ç–∞–ª–æ–Ω –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö:
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π
- –†–∞–±–æ—Ç–∞ —Å Event Store
- –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –†–∞–±–æ—á–∏–π CreateTaskUseCase —Å —Ç–µ—Å—Ç–∞–º–∏

### 3. Task 03: ChangeStatus (2-3 —á–∞—Å–∞)

–ü–µ—Ä–≤—ã–π use case, —Ä–∞–±–æ—Ç–∞—é—â–∏–π —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∞–≥—Ä–µ–≥–∞—Ç–æ–º:
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ Event Store
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ —Å–æ–±—ã—Ç–∏–π
- Optimistic locking
- –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –†–∞–±–æ—á–∏–π ChangeStatusUseCase —Å —Ç–µ—Å—Ç–∞–º–∏

### 4. Task 04: AssignTask (2-3 —á–∞—Å–∞)

–ü–µ—Ä–≤—ã–π use case —Å –≤–Ω–µ—à–Ω–µ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é:
- Dependency Injection
- UserRepository interface
- Mock –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –†–∞–±–æ—á–∏–π AssignTaskUseCase —Å —Ç–µ—Å—Ç–∞–º–∏ –∏ –º–æ–∫–∞–º–∏

### 5. Task 05: Simple Attributes (2-3 —á–∞—Å–∞)

–î–≤–∞ –ø—Ä–æ—Å—Ç—ã—Ö use case –¥–ª—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞:
- ChangePriority
- SetDueDate
- –°—Ö–æ–∂–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –ü—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –î–≤–∞ —Ä–∞–±–æ—á–∏—Ö use case —Å —Ç–µ—Å—Ç–∞–º–∏

### 6. Task 06: Testing Strategy (2 —á–∞—Å–∞)

–§–∏–Ω–∞–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞ ‚Äî —Å–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- Unit, Integration, E2E —Ç–µ—Å—Ç—ã
- Test helpers –∏ fixtures
- Coverage checking
- CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª–Ω–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

## –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

- **Task 01**: 2-3 —á–∞—Å–∞
- **Task 02**: 3-4 —á–∞—Å–∞
- **Task 03**: 2-3 —á–∞—Å–∞
- **Task 04**: 2-3 —á–∞—Å–∞
- **Task 05**: 2-3 —á–∞—Å–∞
- **Task 06**: 2 —á–∞—Å–∞

**–ò—Ç–æ–≥–æ**: ~13-18 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á —É –≤–∞—Å –±—É–¥–µ—Ç:

### 1. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ Use Cases

```
internal/usecase/task/
‚îú‚îÄ‚îÄ commands.go              # –í—Å–µ –∫–æ–º–∞–Ω–¥—ã
‚îú‚îÄ‚îÄ results.go               # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
‚îú‚îÄ‚îÄ errors.go                # –û—à–∏–±–∫–∏
‚îú‚îÄ‚îÄ create_task.go           # ‚úÖ
‚îú‚îÄ‚îÄ change_status.go         # ‚úÖ
‚îú‚îÄ‚îÄ assign_task.go           # ‚úÖ
‚îú‚îÄ‚îÄ change_priority.go       # ‚úÖ
‚îú‚îÄ‚îÄ set_due_date.go          # ‚úÖ
‚îî‚îÄ‚îÄ *_test.go                # –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
```

### 2. –¢–µ—Å—Ç–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
tests/
‚îú‚îÄ‚îÄ mocks/
‚îÇ   ‚îî‚îÄ‚îÄ user_repository.go   # Mock –¥–ª—è UserRepository
‚îú‚îÄ‚îÄ testutil/
‚îÇ   ‚îú‚îÄ‚îÄ db.go                # Database helpers
‚îÇ   ‚îî‚îÄ‚îÄ fixtures.go          # Test data builders
‚îî‚îÄ‚îÄ integration/
    ‚îî‚îÄ‚îÄ usecase/
        ‚îî‚îÄ‚îÄ *.go             # Integration tests
```

### 3. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
internal/infrastructure/eventstore/
‚îú‚îÄ‚îÄ eventstore.go            # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ inmemory.go             # In-memory –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îî‚îÄ‚îÄ mongodb.go              # MongoDB —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–±—É–¥—É—â–µ–µ)
```

### 4. –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- ‚úÖ Use cases –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ HTTP handlers
- ‚úÖ –ì–æ—Ç–æ–≤—ã –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Tag Parser
- ‚úÖ –ì–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ —Å WebSocket
- ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ (>80%)

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

1. **Tag Parser —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** (–∏–∑ `docs/03-tag-grammar.md`)
   - –ü–∞—Ä—Å–∏–Ω–≥ —Ç–µ–≥–æ–≤ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–µ–≥–æ–≤ –≤ –∫–æ–º–∞–Ω–¥—ã
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å use cases

2. **HTTP Handlers**
   - REST API endpoints
   - HTMX integration
   - Request validation

3. **WebSocket Integration**
   - Real-time updates
   - Broadcasting events
   - Presence tracking

4. **Projections (Read Models)**
   - TaskProjection –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ –∑–∞–¥–∞—á
   - Board view –¥–ª—è –∫–∞–Ω–±–∞–Ω–∞
   - Activity log

## –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 1. Test-Driven Development (TDD)

–î–ª—è –∫–∞–∂–¥–æ–≥–æ use case:
1. –ü–∏—à–µ–º —Ç–µ—Å—Ç—ã
2. –†–µ–∞–ª–∏–∑—É–µ–º –∫–æ–¥
3. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–º

### 2. Single Responsibility

–ö–∞–∂–¥—ã–π use case –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–¥–Ω—É –æ–ø–µ—Ä–∞—Ü–∏—é.

### 3. Fail Fast

–í–∞–ª–∏–¥–∞—Ü–∏—è –≤ –Ω–∞—á–∞–ª–µ, —è–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫.

### 4. Idempotency

–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ —Å —Ç–µ–º–∏ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö —Å–æ–±—ã—Ç–∏–π.

### 5. Event Sourcing

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è, –∞–≥—Ä–µ–≥–∞—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏.

## –†–µ—Å—É—Ä—Å—ã

- [Domain Model](../02-domain-model.md) ‚Äî –º–æ–¥–µ–ª—å –¥–æ–º–µ–Ω–∞ Task
- [Tag Grammar](../03-tag-grammar.md) ‚Äî –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞ —Ç–µ–≥–æ–≤
- [Event Sourcing](https://martinfowler.com/eaaDev/EventSourcing.html)
- [Use Case Pattern](https://martinfowler.com/eaaCatalog/applicationFacade.html)

## –í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–æ–±–ª–µ–º—ã

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫:
1. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏
2. –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º use cases (–∫–∞–∫ –ø—Ä–∏–º–µ—Ä—É)
3. Domain model –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

## –°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-10-17
**–í–µ—Ä—Å–∏—è –ø–ª–∞–Ω–∞**: 1.0
**–°—Ç–∞—Ç—É—Å**: –í—Å–µ –∑–∞–¥–∞—á–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã, –≥–æ—Ç–æ–≤—ã –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
