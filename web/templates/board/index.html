{{define "board/index"}} {{template "base" .}} {{end}} {{define
"board-content"}}
<div class="board-page">
    <!-- Header with filters -->
    <header class="board-header">
        <div class="board-title">
            <h1>Board</h1>
            <span class="task-count"
                >{{.Data.TotalTasks}} {{pluralize .Data.TotalTasks "task"
                "tasks"}}</span
            >
        </div>

        {{template "board/filters" .Data}}

        <button
            hx-get="/partials/task/create-form?workspace_id={{.Data.Workspace.ID}}"
            hx-target="#modal-container"
            hx-swap="innerHTML"
            class="primary"
        >
            + New Task
        </button>
    </header>

    <!-- Kanban Board -->
    <div
        class="board-container"
        hx-ext="ws"
        ws-connect="/api/v1/ws?token={{.Data.Token}}"
    >
        <div
            class="board-columns"
            id="board-columns"
            hx-get="/partials/workspace/{{.Data.Workspace.ID}}/board"
            hx-trigger="load"
            hx-swap="innerHTML"
            hx-include="[name='type'], [name='assignee'], [name='priority'], [name='search']"
        >
            <div class="htmx-indicator">
                <span aria-busy="true">Loading...</span>
            </div>
        </div>
    </div>

    <!-- Modal container -->
    <div id="modal-container"></div>
</div>
{{end}} {{define "board/columns"}} {{range .Columns}} {{template "board/column"
.}} {{end}} {{end}}
